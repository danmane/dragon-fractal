<head>
  <meta charset="UTF-8">
  <script src="bower_components/d3/d3.js"></script>
</head>
<body>
  <style>
    #main {width: 1300px; height: 700px;}
    path {stroke-width: 2px; stroke-linecap: square;}
  </style>
  <svg id="main">
    <filter id="colorMeHueRotate">
      <feColorMatrix
        type="hueRotate"
        values="27" />
        <feColorMatrix
          type="saturate"
          values="0.98" />
    </filter>
    <g id="xform" transform="translate(700, 385)">
      <g id="origin">
        <path d="M 0 0 L 1 0" style="stroke: red"/>
        <circle cx="-5" cy="-5" r="1" fill="white"/>
      </g>
    </g>
  </svg>
  <script>
  x=10, y=0, id=1, d=1000, ds=1.1, o=d3.select("#origin");
  cs = d3.scale.category10();
  pd = "M 0 0 L " + x + " 0";
  d3.select("path").transition().duration(d).attr("d", pd);
  setTimeout(update, d);
  function update() {
    if (id++ > 12) return;
    clone = o.node().cloneNode(true)
    // Array.prototype.forEach.call(clone.children, function(x) {x.style=""})
    g=d3.select(o.node().appendChild(clone))
    a = "rotate(0 " + [x,y] + ")", b = "rotate(90 " + [x,y] + ")"
    w = function() {return d3.interpolateString(a,b)}
    // g.style("stroke", cs(id-1))
    g.attr("filter","url(#colorMeHueRotate)")
    g.transition().duration(d).attrTween("transform", w)//.style("stroke",cs(id));
    _x = x+y, y = -x+y, x = _x, d = (d + 50) * ds;
    setTimeout(update, d);
  }
  </script>
</body>
